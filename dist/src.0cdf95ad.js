parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"H99C":[function(require,module,exports) {
var s=function(s){this.type="cow",this.xPos=s.xPos,this.yPos=s.yPos,this.minRandomEnergy=100,this.maxRandomEnergy=200,this.enoughEnergyToBorn=650,this.lessEnoughAfterToBorn=300,this.energy=s.energy||Math.floor(Math.random()*(this.maxRandomEnergy-this.minRandomEnergy+1)+this.minRandomEnergy),this.energyKoef=700,this.koefPossibilityEnter=1,this.maxPossibleEnergy=700,this.possibleObjectsToMove=["empty","grass"],this.BLOCKED_OBJECT=!1,this.objectClass="cow",this.moveStepEnergy=5},e=function(s){this.type="grass",this.xPos=s.xPos,this.yPos=s.yPos,this.minRandomEnergy=10,this.maxRandomEnergy=20,this.enoughEnergyToBorn=45,this.lessEnoughAfterToBorn=25,this.energy=s.energy||Math.floor(Math.random()*(this.maxRandomEnergy-this.minRandomEnergy+1)+this.minRandomEnergy),this.energyKoef=50,this.koefPossibilityEnter=1,this.maxPossibleEnergy=50,this.possibleObjectsToMove=["empty"],this.BLOCKED_OBJECT=!1,this.objectClass="grass",this.addEnergyEveryStep=1},o=function(){this.type="stone",this.objectClass="stone",this.koefPossibilityEnter=1},t=function(){this.type="empty",this.objectClass="empty",this.koefPossibilityEnter=1},i={CURRENT_LOOP_INDEX:0,RANDOM_GRASS_APPEARANCE:5,INTERVAL_TIME:300,MAP_POSSIBLE_WIDTH:Math.floor(screen.width/50)-1,MAP_WIDTH:999,MAP_HEIGHT:10,MIN_POSSIBLE_TIME_INTERVAL:500,COORDS_LIST:[],start:function(s){var e=$(".map");if(!e.hasClass("move")){void 0===s&&(s=this.timeInerval),this.timeInerval=setInterval($.proxy(this.lookEveryCell,this),s),e.addClass("move")}},stop:function(){clearInterval(this.timeInerval),$(".map").removeClass("move")},setNewTimeInterval:function(){this.stop(),this.INTERVAL_TIME=prompt("Введите новую скорость (милисекунды)"),this.INTERVAL_TIME<this.MIN_POSSIBLE_TIME_INTERVAL&&(this.INTERVAL_TIME=this.MIN_POSSIBLE_TIME_INTERVAL),$("._mapSpeedInput").val(this.INTERVAL_TIME),$.proxy(setTimeout(this.start(this.INTERVAL_TIME),1e3),this)},lookEveryCell:function(){this.CURRENT_LOOP_INDEX++,this.CURRENT_LOOP_INDEX%this.RANDOM_GRASS_APPEARANCE==0&&this.setObjectToMap({type:"grass"});for(var s=0;s<this.MAP_HEIGHT;s++)for(var e=0;e<this.MAP_WIDTH;e++)"cow"===this.COORDS_LIST[s][e].type||"grass"===this.COORDS_LIST[s][e].type?this.COORDS_LIST[s][e].BLOCKED_OBJECT!==this.CURRENT_LOOP_INDEX&&(this.COORDS_LIST[s][e].energy<=0?this.COORDS_LIST[s][e]=new t:this.moveObject(this.COORDS_LIST[s][e])):"empty"===this.COORDS_LIST[s][e].type&&this.COORDS_LIST[s][e].koefPossibilityEnter++},createMap:function(){this.MAP_WIDTH=this.MAP_WIDTH>this.MAP_POSSIBLE_WIDTH?this.MAP_POSSIBLE_WIDTH:this.MAP_WIDTH;for(var s=0;s<this.MAP_HEIGHT;s++){this.COORDS_LIST[s]=[];for(var e=0;e<this.MAP_WIDTH;e++)0===s||0===e||s===this.MAP_HEIGHT-1||e===this.MAP_WIDTH-1?this.COORDS_LIST[s][e]=new o:this.COORDS_LIST[s][e]=new t}this.show()},show:function(){var s=$(".map");s.empty();for(var e="",o=0;o<this.MAP_HEIGHT;o++){for(var t=0;t<this.MAP_WIDTH;t++){var i=this.COORDS_LIST[o][t].energy,n=this.COORDS_LIST[o][t].energyKoef,r="";r=void 0===n?"no-energy":i<n/5?"e1":i<2*n/5?"e2":i<3*n/5?"e3":i<4*n/5?"e4":"e5",e=e+'<li class="map-frame '+this.COORDS_LIST[o][t].objectClass+'" data-pos="'+[o,t]+'"><span class="energy '+r+'"></span></li>'}e+="<br />"}s.append(e)},setObjectToMap:function(t){if(!t.xPos||!t.yPos){var n=this.findFromAllEmptyCells();if(!n)return i.stop(),alert("Места нет!");t.xPos=n[0],t.yPos=n[1]}"cow"===t.type?this.COORDS_LIST[t.xPos][t.yPos]=new s(t):"grass"===t.type?this.COORDS_LIST[t.xPos][t.yPos]=new e(t):"stone"===t.type&&(this.COORDS_LIST[t.xPos][t.yPos]=new o),this.show()},mapCellClick:function(s){i.stop(),i.deleteNav(),$(s).prepend($(".cell-nav-holder").html()),$.proxy(i.addCellListeners(),i)},deleteNav:function(){$(".map .cell-nav").each(function(){$(this).remove()})},addCellListeners:function(){$("._cell-nav-cancel").on("click",this.closeCellNav),$("._cell-nav-delete").on("click",this.deleteObject),$("._cell-nav-add-cow").on("click",this.addCowByCell),$("._cell-nav-add-grass").on("click",this.addGrassByCell),$("._cell-nav-add-stone").on("click",this.addStoneByCell)},closeCellNav:function(){$(this).closest(".cell-nav").remove()},deleteObject:function(){var s=$(this).closest(".map-frame").data("pos").split(",");0==s[0]||0==s[1]||s[0]==this.MAP_HEIGHT-1||s[1]==this.MAP_WIDTH-1?alert("Невозможно удалить стену!"):(i.COORDS_LIST[s[0]][s[1]]=new t,i.show())},addCowByCell:function(){var e=$(this).closest(".map-frame").data("pos").split(",");i.COORDS_LIST[e[0]][e[1]]=new s({type:"cow",xPos:parseFloat(e[0]),yPos:parseFloat(e[1])}),i.show()},addGrassByCell:function(){var s=$(this).closest(".map-frame").data("pos").split(",");i.COORDS_LIST[s[0]][s[1]]=new e({type:"grass",xPos:parseFloat(s[0]),yPos:parseFloat(s[1])}),i.show()},addStoneByCell:function(){var s=$(this).closest(".map-frame").data("pos").split(",");i.COORDS_LIST[s[0]][s[1]]=new o,i.show()},findFromAllEmptyCells:function(){for(var s=[],e=0;e<this.MAP_HEIGHT;e++)for(var o=0;o<this.MAP_WIDTH;o++)"empty"===this.COORDS_LIST[e][o].type&&s.push([e,o]);return!!s.length&&s[Math.floor(Math.random()*s.length)]},moveObject:function(s){var e=this.getRandomEmptyPlace(s),o={};o.xPos=e.xPos,o.yPos=e.yPos,o.energy=e.energy,"grass"===this.COORDS_LIST[o.xPos][o.yPos].type&&"cow"===this.COORDS_LIST[s.xPos][s.yPos].type&&(s.energy=s.energy+this.COORDS_LIST[o.xPos][o.yPos].energy),s.enoughEnergyToBorn&&s.energy>=s.enoughEnergyToBorn?(s.energy=s.energy-s.lessEnoughAfterToBorn,s.BLOCKED_OBJECT=this.CURRENT_LOOP_INDEX,this.setObjectToMap({type:s.type,xPos:o.xPos,yPos:o.yPos})):"cow"===s.type&&(this.COORDS_LIST[s.xPos][s.yPos].koefPossibilityEnter=1,this.COORDS_LIST[s.xPos][s.yPos]=new t,s.xPos=o.xPos,s.yPos=o.yPos,this.COORDS_LIST[s.xPos][s.yPos]=s,s.BLOCKED_OBJECT=this.CURRENT_LOOP_INDEX),void 0!==s.moveStepEnergy&&(s.energy=s.energy-s.moveStepEnergy),void 0!==s.addEnergyEveryStep&&s.energy<s.maxPossibleEnergy&&(s.energy=s.energy+s.addEnergyEveryStep),this.show()},getRandomEmptyPlace:function(s){var e=this.findEmptyCells(s);if(!e)return{xPos:s.xPos,yPos:s.yPos,energy:s.energy-s.moveStepEnergy};var o=this.randomUseKoef(e),t=Math.floor(Math.random()*(s.maxRandomEnergy-s.minRandomEnergy+1)+s.minRandomEnergy);return{xPos:o.xPos,yPos:o.yPos,energy:t}},randomUseKoef:function(s){for(var e=0,o=0;o<s.length;o++)e+=s[o].koefPossibilityEnter;var t=100/e;for(o=0;o<s.length;o++)s[o].procent=s[o].koefPossibilityEnter*t;var i=Math.floor(100*Math.random()),n=0;for(o=0;o<s.length;o++){if(i>=n&&i<n+s[o].procent)return s[o];n+=s[o].procent}},findEmptyCells:function(s){var e=[];s.possibleObjectsToMove.indexOf(this.COORDS_LIST[s.xPos-1][s.yPos-1].type)>-1&&e.push({xPos:s.xPos-1,yPos:s.yPos-1,koefPossibilityEnter:i.COORDS_LIST[s.xPos-1][s.yPos-1].koefPossibilityEnter}),s.possibleObjectsToMove.indexOf(this.COORDS_LIST[s.xPos-1][s.yPos].type)>-1&&e.push({xPos:s.xPos-1,yPos:s.yPos,koefPossibilityEnter:i.COORDS_LIST[s.xPos-1][s.yPos].koefPossibilityEnter}),s.possibleObjectsToMove.indexOf(this.COORDS_LIST[s.xPos-1][s.yPos+1].type)>-1&&e.push({xPos:s.xPos-1,yPos:s.yPos+1,koefPossibilityEnter:i.COORDS_LIST[s.xPos-1][s.yPos+1].koefPossibilityEnter}),s.possibleObjectsToMove.indexOf(this.COORDS_LIST[s.xPos][s.yPos-1].type)>-1&&e.push({xPos:s.xPos,yPos:s.yPos-1,koefPossibilityEnter:i.COORDS_LIST[s.xPos][s.yPos-1].koefPossibilityEnter}),s.possibleObjectsToMove.indexOf(this.COORDS_LIST[s.xPos][s.yPos+1].type)>-1&&e.push({xPos:s.xPos,yPos:s.yPos+1,koefPossibilityEnter:i.COORDS_LIST[s.xPos][s.yPos+1].koefPossibilityEnter}),s.possibleObjectsToMove.indexOf(this.COORDS_LIST[s.xPos+1][s.yPos-1].type)>-1&&e.push({xPos:s.xPos+1,yPos:s.yPos-1,koefPossibilityEnter:i.COORDS_LIST[s.xPos+1][s.yPos-1].koefPossibilityEnter}),s.possibleObjectsToMove.indexOf(this.COORDS_LIST[s.xPos+1][s.yPos].type)>-1&&e.push({xPos:s.xPos+1,yPos:s.yPos,koefPossibilityEnter:i.COORDS_LIST[s.xPos+1][s.yPos].koefPossibilityEnter}),s.possibleObjectsToMove.indexOf(this.COORDS_LIST[s.xPos+1][s.yPos+1].type)>-1&&e.push({xPos:s.xPos+1,yPos:s.yPos+1,koefPossibilityEnter:i.COORDS_LIST[s.xPos+1][s.yPos+1].koefPossibilityEnter});var o=e.filter(this.filterGrass);return"cow"===s.type&&0!==o.length?o:!!e.length&&e},filterGrass:function(s){return"grass"===i.COORDS_LIST[s.xPos][s.yPos].type}},n=function(){$("._addCow").on("click",r),$("._addGrass").on("click",y),$("._addStone").on("click",a),$("._mapStart").on("click",h),$("._mapStop").on("click",l),$("._mapSpeedBtn").on("click",O),$(".map").on("click",".map-frame",P)},r=function(){$.proxy(i.setObjectToMap({type:"cow"}),i)},y=function(){$.proxy(i.setObjectToMap({type:"grass"}),i)},a=function(){$.proxy(i.setObjectToMap({type:"stone"}),i)},P=function(){$.proxy(i.mapCellClick(this),i)},h=function(){$.proxy(i.start(parseInt($("._mapSpeedInput").val()),i))},l=function(){$.proxy(i.stop(),i)},O=function(){$.proxy(i.setNewTimeInterval(),i)};jQuery(function(){i.createMap(),n()});
},{}]},{},["H99C"], null)
//# sourceMappingURL=/src.0cdf95ad.js.map