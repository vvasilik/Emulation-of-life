{"version":3,"sources":["index.js"],"names":["Cow","mapObject","type","xPos","yPos","minRandomEnergy","maxRandomEnergy","enoughEnergyToBorn","lessEnoughAfterToBorn","energy","Math","floor","random","energyKoef","koefPossibilityEnter","maxPossibleEnergy","possibleObjectsToMove","BLOCKED_OBJECT","objectClass","moveStepEnergy","Grass","addEnergyEveryStep","Stone","Empty","map","CURRENT_LOOP_INDEX","RANDOM_GRASS_APPEARANCE","INTERVAL_TIME","MAP_POSSIBLE_WIDTH","screen","width","MAP_WIDTH","MAP_HEIGHT","MIN_POSSIBLE_TIME_INTERVAL","COORDS_LIST","start","newInterval","mapEl","$","hasClass","self","undefined","timeInerval","setInterval","proxy","lookEveryCell","addClass","stop","clearInterval","removeClass","setNewTimeInterval","prompt","val","setTimeout","setObjectToMap","i","j","moveObject","createMap","show","mapHTML","empty","mapList","energyСoef","energySize","append","allEmptyCellsArr","findFromAllEmptyCells","alert","mapCellClick","cell","deleteNav","prepend","html","addCellListeners","each","remove","on","closeCellNav","deleteObject","addCowByCell","addGrassByCell","addStoneByCell","closest","clickedPositionList","data","split","parseFloat","allEmptyCells","push","length","randomObjValues","getRandomEmptyPlace","newObj","emptyCellsList","findEmptyCells","randomEmptyCell","randomUseKoef","list","koefSum","etalon","procent","randomNumber","procentSum","indexOf","filterGrassList","filter","filterGrass","coords","addListeners","addCow","addGrass","addStone","mapStart","mapStop","parseInt","jQuery"],"mappings":"AAAA,IAAIA,GAAG,GAAG,SAANA,GAAM,CAAUC,SAAV,EAAqB;AAC3B,OAAKC,IAAL,GAAY,KAAZ;AACA,OAAKC,IAAL,GAAYF,SAAS,CAACE,IAAtB;AACA,OAAKC,IAAL,GAAYH,SAAS,CAACG,IAAtB;AACA,OAAKC,eAAL,GAAuB,GAAvB;AACA,OAAKC,eAAL,GAAuB,GAAvB;AACA,OAAKC,kBAAL,GAA0B,GAA1B;AACA,OAAKC,qBAAL,GAA6B,GAA7B;AACA,OAAKC,MAAL,GAAcR,SAAS,CAACQ,MAAV,IAAqBC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,MAAiB,KAAKN,eAAL,GAAuB,KAAKD,eAA5B,GAA8C,CAA/D,IAAoE,KAAKA,eAApF,CAAnC;AACA,OAAKQ,UAAL,GAAkB,GAAlB;AACA,OAAKC,oBAAL,GAA4B,CAA5B;AACA,OAAKC,iBAAL,GAAyB,GAAzB;AACA,OAAKC,qBAAL,GAA6B,CAAC,OAAD,EAAU,OAAV,CAA7B;AACA,OAAKC,cAAL,GAAsB,KAAtB;AACA,OAAKC,WAAL,GAAmB,KAAnB;AACA,OAAKC,cAAL,GAAsB,CAAtB;AACH,CAhBD;;AAkBA,IAAIC,KAAK,GAAG,SAARA,KAAQ,CAAUnB,SAAV,EAAqB;AAC7B,OAAKC,IAAL,GAAY,OAAZ;AACA,OAAKC,IAAL,GAAYF,SAAS,CAACE,IAAtB;AACA,OAAKC,IAAL,GAAYH,SAAS,CAACG,IAAtB;AACA,OAAKC,eAAL,GAAuB,EAAvB;AACA,OAAKC,eAAL,GAAuB,EAAvB;AACA,OAAKC,kBAAL,GAA0B,EAA1B;AACA,OAAKC,qBAAL,GAA6B,EAA7B;AACA,OAAKC,MAAL,GAAcR,SAAS,CAACQ,MAAV,IAAqBC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,MAAiB,KAAKN,eAAL,GAAuB,KAAKD,eAA5B,GAA8C,CAA/D,IAAoE,KAAKA,eAApF,CAAnC;AACA,OAAKQ,UAAL,GAAkB,EAAlB;AACA,OAAKC,oBAAL,GAA4B,CAA5B;AACA,OAAKC,iBAAL,GAAyB,EAAzB;AACA,OAAKC,qBAAL,GAA6B,CAAC,OAAD,CAA7B;AACA,OAAKC,cAAL,GAAsB,KAAtB;AACA,OAAKC,WAAL,GAAmB,OAAnB;AACA,OAAKG,kBAAL,GAA0B,CAA1B;AACH,CAhBD;;AAkBA,IAAIC,KAAK,GAAG,SAARA,KAAQ,GAAY;AACpB,OAAKpB,IAAL,GAAY,OAAZ;AACA,OAAKgB,WAAL,GAAmB,OAAnB;AACA,OAAKJ,oBAAL,GAA4B,CAA5B;AACH,CAJD;;AAMA,IAAIS,KAAK,GAAG,SAARA,KAAQ,GAAY;AACpB,OAAKrB,IAAL,GAAY,OAAZ;AACA,OAAKgB,WAAL,GAAmB,OAAnB;AACA,OAAKJ,oBAAL,GAA4B,CAA5B;AACH,CAJD,EAOA;;;AACA,IAAIU,GAAG,GAAG;AACNC,EAAAA,kBAAkB,EAAE,CADd;AAENC,EAAAA,uBAAuB,EAAE,CAFnB;AAGNC,EAAAA,aAAa,EAAE,GAHT;AAINC,EAAAA,kBAAkB,EAAElB,IAAI,CAACC,KAAL,CAAWkB,MAAM,CAACC,KAAP,GAAe,EAA1B,IAAgC,CAJ9C;AAKNC,EAAAA,SAAS,EAAE,GALL;AAMNC,EAAAA,UAAU,EAAE,EANN;AAONC,EAAAA,0BAA0B,EAAE,GAPtB;AAQNC,EAAAA,WAAW,EAAE,EARP;AASNC,EAAAA,KAAK,EAAE,eAAUC,WAAV,EAAuB;AAC1B,QAAIC,KAAK,GAAGC,CAAC,CAAC,MAAD,CAAb;;AACA,QAAI,CAACD,KAAK,CAACE,QAAN,CAAe,MAAf,CAAL,EAA6B;AACzB,UAAIC,IAAI,GAAG,IAAX;;AACA,UAAIJ,WAAW,KAAKK,SAApB,EAA+B;AAC3BL,QAAAA,WAAW,GAAG,KAAKM,WAAnB;AACH;;AACD,WAAKA,WAAL,GAAmBC,WAAW,CAACL,CAAC,CAACM,KAAF,CAAQJ,IAAI,CAACK,aAAb,EAA4BL,IAA5B,CAAD,EAAoCJ,WAApC,CAA9B;AACAC,MAAAA,KAAK,CAACS,QAAN,CAAe,MAAf;AACH;AACJ,GAnBK;AAoBNC,EAAAA,IAAI,EAAE,gBAAY;AACdC,IAAAA,aAAa,CAAC,KAAKN,WAAN,CAAb;AACAJ,IAAAA,CAAC,CAAC,MAAD,CAAD,CAAUW,WAAV,CAAsB,MAAtB;AACH,GAvBK;AAwBNC,EAAAA,kBAAkB,EAAE,8BAAY;AAC5B,SAAKH,IAAL;AACA,SAAKpB,aAAL,GAAqBwB,MAAM,CAAC,sCAAD,CAA3B;;AACA,QAAI,KAAKxB,aAAL,GAAqB,KAAKM,0BAA9B,EAA0D;AACtD,WAAKN,aAAL,GAAqB,KAAKM,0BAA1B;AACH;;AACDK,IAAAA,CAAC,CAAC,iBAAD,CAAD,CAAqBc,GAArB,CAAyB,KAAKzB,aAA9B;AACAW,IAAAA,CAAC,CAACM,KAAF,CAAQS,UAAU,CAAC,KAAKlB,KAAL,CAAW,KAAKR,aAAhB,CAAD,EAAiC,IAAjC,CAAlB,EAA0D,IAA1D;AACH,GAhCK;AAiCNkB,EAAAA,aAAa,EAAE,yBAAY;AACvB,SAAKpB,kBAAL;;AACA,QAAI,KAAKA,kBAAL,GAA0B,KAAKC,uBAA/B,KAA2D,CAA/D,EAAkE;AAC9D,WAAK4B,cAAL,CAAoB;AAACpD,QAAAA,IAAI,EAAE;AAAP,OAApB;AACH;;AACD,SAAK,IAAIqD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKvB,UAAzB,EAAqCuB,CAAC,EAAtC,EAA0C;AACtC,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKzB,SAAzB,EAAoCyB,CAAC,EAArC,EAAyC;AACrC,YAAI,KAAKtB,WAAL,CAAiBqB,CAAjB,EAAoBC,CAApB,EAAuBtD,IAAvB,KAAgC,KAAhC,IAAyC,KAAKgC,WAAL,CAAiBqB,CAAjB,EAAoBC,CAApB,EAAuBtD,IAAvB,KAAgC,OAA7E,EAAsF;AAClF,cAAI,KAAKgC,WAAL,CAAiBqB,CAAjB,EAAoBC,CAApB,EAAuBvC,cAAvB,KAA0C,KAAKQ,kBAAnD,EAAsE;AAClE,gBAAI,KAAKS,WAAL,CAAiBqB,CAAjB,EAAoBC,CAApB,EAAuB/C,MAAvB,IAAiC,CAArC,EAAwC;AACpC,mBAAKyB,WAAL,CAAiBqB,CAAjB,EAAoBC,CAApB,IAAyB,IAAIjC,KAAJ,EAAzB;AACH,aAFD,MAEO;AACH,mBAAKkC,UAAL,CAAgB,KAAKvB,WAAL,CAAiBqB,CAAjB,EAAoBC,CAApB,CAAhB;AACH;AACJ;AACJ,SARD,MAQO,IAAI,KAAKtB,WAAL,CAAiBqB,CAAjB,EAAoBC,CAApB,EAAuBtD,IAAvB,KAAgC,OAApC,EAA4C;AACjD,eAAKgC,WAAL,CAAiBqB,CAAjB,EAAoBC,CAApB,EAAuB1C,oBAAvB;AACD;AACJ;AACJ;AACJ,GArDK;AAsDN4C,EAAAA,SAAS,EAAE,qBAAY;AACnB;AACA,SAAK3B,SAAL,GAAiB,KAAKA,SAAL,GAAiB,KAAKH,kBAAtB,GAA2C,KAAKA,kBAAhD,GAAoE,KAAKG,SAA1F;;AAEA,SAAK,IAAIwB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKvB,UAAzB,EAAqCuB,CAAC,EAAtC,EAA0C;AACtC,WAAKrB,WAAL,CAAiBqB,CAAjB,IAAsB,EAAtB;;AACA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKzB,SAAzB,EAAoCyB,CAAC,EAArC,EAAyC;AACrC,YAAID,CAAC,KAAK,CAAN,IAAWC,CAAC,KAAK,CAAjB,IAAsBD,CAAC,KAAK,KAAKvB,UAAL,GAAkB,CAA9C,IAAmDwB,CAAC,KAAK,KAAKzB,SAAL,GAAiB,CAA9E,EAAiF;AAC7E,eAAKG,WAAL,CAAiBqB,CAAjB,EAAoBC,CAApB,IAAyB,IAAIlC,KAAJ,EAAzB;AACH,SAFD,MAEO;AACH,eAAKY,WAAL,CAAiBqB,CAAjB,EAAoBC,CAApB,IAAyB,IAAIjC,KAAJ,EAAzB;AACH;AACJ;AACJ;;AACD,SAAKoC,IAAL;AACH,GArEK;AAsENA,EAAAA,IAAI,EAAE,gBAAY;AACd,QAAIC,OAAO,GAAGtB,CAAC,CAAC,MAAD,CAAf;AACAsB,IAAAA,OAAO,CAACC,KAAR;AACA,QAAIC,OAAO,GAAG,EAAd;;AACA,SAAK,IAAIP,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKvB,UAAzB,EAAqCuB,CAAC,EAAtC,EAA0C;AACtC,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKzB,SAAzB,EAAoCyB,CAAC,EAArC,EAAyC;AACrC,YAAI/C,MAAM,GAAG,KAAKyB,WAAL,CAAiBqB,CAAjB,EAAoBC,CAApB,EAAuB/C,MAApC;AACA,YAAIsD,UAAU,GAAG,KAAK7B,WAAL,CAAiBqB,CAAjB,EAAoBC,CAApB,EAAuB3C,UAAxC;AACA,YAAImD,UAAU,GAAG,EAAjB;;AACA,YAAID,UAAU,KAAKtB,SAAnB,EAA8B;AAC1BuB,UAAAA,UAAU,GAAG,WAAb;AACH,SAFD,MAEO,IAAIvD,MAAM,GAAGsD,UAAU,GAAC,CAAxB,EAA2B;AAC9BC,UAAAA,UAAU,GAAG,IAAb;AACH,SAFM,MAEA,IAAIvD,MAAM,GAAG,IAAEsD,UAAF,GAAa,CAA1B,EAA6B;AAChCC,UAAAA,UAAU,GAAG,IAAb;AACH,SAFM,MAEA,IAAIvD,MAAM,GAAG,IAAEsD,UAAF,GAAa,CAA1B,EAA6B;AAChCC,UAAAA,UAAU,GAAG,IAAb;AACH,SAFM,MAEA,IAAIvD,MAAM,GAAG,IAAEsD,UAAF,GAAa,CAA1B,EAA6B;AAChCC,UAAAA,UAAU,GAAG,IAAb;AACH,SAFM,MAEA;AACHA,UAAAA,UAAU,GAAG,IAAb;AACH;;AACDF,QAAAA,OAAO,GAAGA,OAAO,GAAG,uBAAV,GAAoC,KAAK5B,WAAL,CAAiBqB,CAAjB,EAAoBC,CAApB,EAAuBtC,WAA3D,GAAyE,cAAzE,GAA0F,CAACqC,CAAD,EAAIC,CAAJ,CAA1F,GAAmG,wBAAnG,GAA8HQ,UAA9H,GAA2I,gBAArJ;AACH;;AACDF,MAAAA,OAAO,GAAGA,OAAO,GAAG,QAApB;AACH;;AACDF,IAAAA,OAAO,CAACK,MAAR,CAAeH,OAAf;AACH,GAjGK;AAkGNR,EAAAA,cAAc,EAAE,wBAAUrD,SAAV,EAAqB;AACjC,QAAI,CAACA,SAAS,CAACE,IAAX,IAAmB,CAACF,SAAS,CAACG,IAAlC,EAAwC;AACpC,UAAI8D,gBAAgB,GAAG,KAAKC,qBAAL,EAAvB;;AACA,UAAI,CAACD,gBAAL,EAAuB;AACnB1C,QAAAA,GAAG,CAACuB,IAAJ;AACA,eAAOqB,KAAK,CAAC,YAAD,CAAZ;AACH;;AACDnE,MAAAA,SAAS,CAACE,IAAV,GAAiB+D,gBAAgB,CAAC,CAAD,CAAjC;AACAjE,MAAAA,SAAS,CAACG,IAAV,GAAiB8D,gBAAgB,CAAC,CAAD,CAAjC;AACH;;AAED,QAAIjE,SAAS,CAACC,IAAV,KAAmB,KAAvB,EAA8B;AAC1B,WAAKgC,WAAL,CAAiBjC,SAAS,CAACE,IAA3B,EAAiCF,SAAS,CAACG,IAA3C,IAAmD,IAAIJ,GAAJ,CAAQC,SAAR,CAAnD;AACH,KAFD,MAEO,IAAIA,SAAS,CAACC,IAAV,KAAmB,OAAvB,EAAgC;AACnC,WAAKgC,WAAL,CAAiBjC,SAAS,CAACE,IAA3B,EAAiCF,SAAS,CAACG,IAA3C,IAAmD,IAAIgB,KAAJ,CAAUnB,SAAV,CAAnD;AACH,KAFM,MAEA,IAAIA,SAAS,CAACC,IAAV,KAAmB,OAAvB,EAAgC;AACnC,WAAKgC,WAAL,CAAiBjC,SAAS,CAACE,IAA3B,EAAiCF,SAAS,CAACG,IAA3C,IAAmD,IAAIkB,KAAJ,EAAnD;AACH;;AAED,SAAKqC,IAAL;AACH,GAtHK;AAuHNU,EAAAA,YAAY,EAAE,sBAAUC,IAAV,EAAgB;AAC1B9C,IAAAA,GAAG,CAACuB,IAAJ;AACAvB,IAAAA,GAAG,CAAC+C,SAAJ;AACAjC,IAAAA,CAAC,CAACgC,IAAD,CAAD,CAAQE,OAAR,CAAgBlC,CAAC,CAAC,kBAAD,CAAD,CAAsBmC,IAAtB,EAAhB;AACAnC,IAAAA,CAAC,CAACM,KAAF,CAAQpB,GAAG,CAACkD,gBAAJ,EAAR,EAAgClD,GAAhC;AACH,GA5HK;AA6HN+C,EAAAA,SAAS,EAAE,qBAAY;AACnBjC,IAAAA,CAAC,CAAC,gBAAD,CAAD,CAAoBqC,IAApB,CAAyB,YAAY;AACnCrC,MAAAA,CAAC,CAAC,IAAD,CAAD,CAAQsC,MAAR;AACD,KAFD;AAGH,GAjIK;AAkINF,EAAAA,gBAAgB,EAAE,4BAAY;AAC1BpC,IAAAA,CAAC,CAAC,mBAAD,CAAD,CAAuBuC,EAAvB,CAA0B,OAA1B,EAAmC,KAAKC,YAAxC;AACAxC,IAAAA,CAAC,CAAC,mBAAD,CAAD,CAAuBuC,EAAvB,CAA0B,OAA1B,EAAmC,KAAKE,YAAxC;AACAzC,IAAAA,CAAC,CAAC,oBAAD,CAAD,CAAwBuC,EAAxB,CAA2B,OAA3B,EAAoC,KAAKG,YAAzC;AACA1C,IAAAA,CAAC,CAAC,sBAAD,CAAD,CAA0BuC,EAA1B,CAA6B,OAA7B,EAAsC,KAAKI,cAA3C;AACA3C,IAAAA,CAAC,CAAC,sBAAD,CAAD,CAA0BuC,EAA1B,CAA6B,OAA7B,EAAsC,KAAKK,cAA3C;AACH,GAxIK;AAyINJ,EAAAA,YAAY,EAAE,wBAAY;AACtBxC,IAAAA,CAAC,CAAC,IAAD,CAAD,CAAQ6C,OAAR,CAAgB,WAAhB,EAA6BP,MAA7B;AACH,GA3IK;AA4ING,EAAAA,YAAY,EAAE,wBAAY;AACtB,QAAIK,mBAAmB,GAAG9C,CAAC,CAAC,IAAD,CAAD,CAAQ6C,OAAR,CAAgB,YAAhB,EAA8BE,IAA9B,CAAmC,KAAnC,EAA0CC,KAA1C,CAAgD,GAAhD,CAA1B;;AACA,QAAIF,mBAAmB,CAAC,CAAD,CAAnB,IAA0B,CAA1B,IAA+BA,mBAAmB,CAAC,CAAD,CAAnB,IAA0B,CAAzD,IAA8DA,mBAAmB,CAAC,CAAD,CAAnB,IAA0B,KAAKpD,UAAL,GAAkB,CAA1G,IAA+GoD,mBAAmB,CAAC,CAAD,CAAnB,IAA0B,KAAKrD,SAAL,GAAiB,CAA9J,EAAgK;AAC5JqC,MAAAA,KAAK,CAAC,2BAAD,CAAL;AACH,KAFD,MAEO;AACH5C,MAAAA,GAAG,CAACU,WAAJ,CAAgBkD,mBAAmB,CAAC,CAAD,CAAnC,EAAwCA,mBAAmB,CAAC,CAAD,CAA3D,IAAkE,IAAI7D,KAAJ,EAAlE;AACAC,MAAAA,GAAG,CAACmC,IAAJ;AACH;AACJ,GApJK;AAqJNqB,EAAAA,YAAY,EAAE,wBAAY;AACtB,QAAII,mBAAmB,GAAG9C,CAAC,CAAC,IAAD,CAAD,CAAQ6C,OAAR,CAAgB,YAAhB,EAA8BE,IAA9B,CAAmC,KAAnC,EAA0CC,KAA1C,CAAgD,GAAhD,CAA1B;AACA9D,IAAAA,GAAG,CAACU,WAAJ,CAAgBkD,mBAAmB,CAAC,CAAD,CAAnC,EAAwCA,mBAAmB,CAAC,CAAD,CAA3D,IAAkE,IAAIpF,GAAJ,CAAQ;AAACE,MAAAA,IAAI,EAAE,KAAP;AAAcC,MAAAA,IAAI,EAAEoF,UAAU,CAACH,mBAAmB,CAAC,CAAD,CAApB,CAA9B;AAAwDhF,MAAAA,IAAI,EAAEmF,UAAU,CAACH,mBAAmB,CAAC,CAAD,CAApB;AAAxE,KAAR,CAAlE;AACA5D,IAAAA,GAAG,CAACmC,IAAJ;AACH,GAzJK;AA0JNsB,EAAAA,cAAc,EAAE,0BAAY;AACxB,QAAIG,mBAAmB,GAAG9C,CAAC,CAAC,IAAD,CAAD,CAAQ6C,OAAR,CAAgB,YAAhB,EAA8BE,IAA9B,CAAmC,KAAnC,EAA0CC,KAA1C,CAAgD,GAAhD,CAA1B;AACA9D,IAAAA,GAAG,CAACU,WAAJ,CAAgBkD,mBAAmB,CAAC,CAAD,CAAnC,EAAwCA,mBAAmB,CAAC,CAAD,CAA3D,IAAkE,IAAIhE,KAAJ,CAAU;AAAClB,MAAAA,IAAI,EAAE,OAAP;AAAgBC,MAAAA,IAAI,EAAEoF,UAAU,CAACH,mBAAmB,CAAC,CAAD,CAApB,CAAhC;AAA0DhF,MAAAA,IAAI,EAAEmF,UAAU,CAACH,mBAAmB,CAAC,CAAD,CAApB;AAA1E,KAAV,CAAlE;AACA5D,IAAAA,GAAG,CAACmC,IAAJ;AACH,GA9JK;AA+JNuB,EAAAA,cAAc,EAAE,0BAAY;AACxB,QAAIE,mBAAmB,GAAG9C,CAAC,CAAC,IAAD,CAAD,CAAQ6C,OAAR,CAAgB,YAAhB,EAA8BE,IAA9B,CAAmC,KAAnC,EAA0CC,KAA1C,CAAgD,GAAhD,CAA1B;AACA9D,IAAAA,GAAG,CAACU,WAAJ,CAAgBkD,mBAAmB,CAAC,CAAD,CAAnC,EAAwCA,mBAAmB,CAAC,CAAD,CAA3D,IAAkE,IAAI9D,KAAJ,EAAlE;AACAE,IAAAA,GAAG,CAACmC,IAAJ;AACH,GAnKK;AAoKNQ,EAAAA,qBAAqB,EAAE,iCAAY;AAC/B,QAAIqB,aAAa,GAAG,EAApB;;AACA,SAAK,IAAIjC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKvB,UAAzB,EAAqCuB,CAAC,EAAtC,EAA0C;AACtC,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKzB,SAAzB,EAAoCyB,CAAC,EAArC,EAAyC;AACrC,YAAI,KAAKtB,WAAL,CAAiBqB,CAAjB,EAAoBC,CAApB,EAAuBtD,IAAvB,KAAgC,OAApC,EAA6C;AACzCsF,UAAAA,aAAa,CAACC,IAAd,CAAmB,CAAClC,CAAD,EAAGC,CAAH,CAAnB;AACH;AACJ;AACJ;;AACD,QAAI,CAACgC,aAAa,CAACE,MAAnB,EAA2B;AACvB,aAAO,KAAP;AACH,KAFD,MAEO;AACH,aAAOF,aAAa,CAAC9E,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgB4E,aAAa,CAACE,MAAzC,CAAD,CAApB;AACH;AACJ,GAlLK;AAmLNjC,EAAAA,UAAU,EAAE,oBAAUxD,SAAV,EAAqB;AAC7B,QAAI0F,eAAe,GAAG,KAAKC,mBAAL,CAAyB3F,SAAzB,CAAtB;AACA,QAAI4F,MAAM,GAAG,EAAb;AACAA,IAAAA,MAAM,CAAC1F,IAAP,GAAcwF,eAAe,CAACxF,IAA9B;AACA0F,IAAAA,MAAM,CAACzF,IAAP,GAAcuF,eAAe,CAACvF,IAA9B;AACAyF,IAAAA,MAAM,CAACpF,MAAP,GAAgBkF,eAAe,CAAClF,MAAhC;;AAEA,QAAI,KAAKyB,WAAL,CAAiB2D,MAAM,CAAC1F,IAAxB,EAA8B0F,MAAM,CAACzF,IAArC,EAA2CF,IAA3C,KAAoD,OAApD,IAA+D,KAAKgC,WAAL,CAAiBjC,SAAS,CAACE,IAA3B,EAAiCF,SAAS,CAACG,IAA3C,EAAiDF,IAAjD,KAA0D,KAA7H,EAAoI;AAChID,MAAAA,SAAS,CAACQ,MAAV,GAAmBR,SAAS,CAACQ,MAAV,GAAmB,KAAKyB,WAAL,CAAiB2D,MAAM,CAAC1F,IAAxB,EAA8B0F,MAAM,CAACzF,IAArC,EAA2CK,MAAjF;AACH;;AAED,QAAIR,SAAS,CAACM,kBAAV,IAAgCN,SAAS,CAACQ,MAAV,IAAoBR,SAAS,CAACM,kBAAlE,EAAsF;AAClFN,MAAAA,SAAS,CAACQ,MAAV,GAAmBR,SAAS,CAACQ,MAAV,GAAmBR,SAAS,CAACO,qBAAhD;AACAP,MAAAA,SAAS,CAACgB,cAAV,GAA2B,KAAKQ,kBAAhC;AACA,WAAK6B,cAAL,CAAoB;AAACpD,QAAAA,IAAI,EAAGD,SAAS,CAACC,IAAlB;AAAwBC,QAAAA,IAAI,EAAE0F,MAAM,CAAC1F,IAArC;AAA2CC,QAAAA,IAAI,EAAEyF,MAAM,CAACzF;AAAxD,OAApB;AACH,KAJD,MAIO,IAAIH,SAAS,CAACC,IAAV,KAAmB,KAAvB,EAA8B;AACjC,WAAKgC,WAAL,CAAiBjC,SAAS,CAACE,IAA3B,EAAiCF,SAAS,CAACG,IAA3C,EAAiDU,oBAAjD,GAAwE,CAAxE;AACA,WAAKoB,WAAL,CAAiBjC,SAAS,CAACE,IAA3B,EAAiCF,SAAS,CAACG,IAA3C,IAAmD,IAAImB,KAAJ,EAAnD;AAEAtB,MAAAA,SAAS,CAACE,IAAV,GAAiB0F,MAAM,CAAC1F,IAAxB;AACAF,MAAAA,SAAS,CAACG,IAAV,GAAiByF,MAAM,CAACzF,IAAxB;AACA,WAAK8B,WAAL,CAAiBjC,SAAS,CAACE,IAA3B,EAAiCF,SAAS,CAACG,IAA3C,IAAmDH,SAAnD;AACAA,MAAAA,SAAS,CAACgB,cAAV,GAA2B,KAAKQ,kBAAhC;AACH;;AAED,QAAIxB,SAAS,CAACkB,cAAV,KAA6BsB,SAAjC,EAA4C;AACxCxC,MAAAA,SAAS,CAACQ,MAAV,GAAmBR,SAAS,CAACQ,MAAV,GAAmBR,SAAS,CAACkB,cAAhD;AACH;;AAED,QAAIlB,SAAS,CAACoB,kBAAV,KAAiCoB,SAArC,EAAgD;AAC5C,UAAIxC,SAAS,CAACQ,MAAV,GAAmBR,SAAS,CAACc,iBAAjC,EAAoD;AAChDd,QAAAA,SAAS,CAACQ,MAAV,GAAmBR,SAAS,CAACQ,MAAV,GAAmBR,SAAS,CAACoB,kBAAhD;AACH;AACJ;;AAED,SAAKsC,IAAL;AACH,GAvNK;AAwNNiC,EAAAA,mBAAmB,EAAE,6BAAU3F,SAAV,EAAqB;AACtC,QAAI6F,cAAc,GAAG,KAAKC,cAAL,CAAoB9F,SAApB,CAArB;;AACA,QAAI,CAAC6F,cAAL,EAAqB;AACjB,aAAO;AAAC3F,QAAAA,IAAI,EAAEF,SAAS,CAACE,IAAjB;AAAuBC,QAAAA,IAAI,EAAEH,SAAS,CAACG,IAAvC;AAA6CK,QAAAA,MAAM,EAAER,SAAS,CAACQ,MAAV,GAAmBR,SAAS,CAACkB;AAAlF,OAAP;AACH;;AACD,QAAI6E,eAAe,GAAG,KAAKC,aAAL,CAAmBH,cAAnB,CAAtB;AACA,QAAIrF,MAAM,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,MAAiBX,SAAS,CAACK,eAAV,GAA4BL,SAAS,CAACI,eAAtC,GAAwD,CAAzE,IAA8EJ,SAAS,CAACI,eAAnG,CAAb;AACA,WAAO;AAACF,MAAAA,IAAI,EAAE6F,eAAe,CAAC7F,IAAvB;AAA6BC,MAAAA,IAAI,EAAE4F,eAAe,CAAC5F,IAAnD;AAAyDK,MAAAA,MAAM,EAAEA;AAAjE,KAAP;AACH,GAhOK;AAkONwF,EAAAA,aAAa,EAAE,uBAAUC,IAAV,EAAgB;AAC3B,QAAIC,OAAO,GAAG,CAAd;;AACA,SAAK,IAAI5C,CAAC,GAAC,CAAX,EAAcA,CAAC,GAAC2C,IAAI,CAACR,MAArB,EAA6BnC,CAAC,EAA9B,EAAkC;AAC9B4C,MAAAA,OAAO,IAAID,IAAI,CAAC3C,CAAD,CAAJ,CAAQzC,oBAAnB;AACH;;AAED,QAAIsF,MAAM,GAAG,MAAMD,OAAnB;;AACA,SAAK,IAAI5C,CAAC,GAAC,CAAX,EAAcA,CAAC,GAAC2C,IAAI,CAACR,MAArB,EAA6BnC,CAAC,EAA9B,EAAkC;AAC9B2C,MAAAA,IAAI,CAAC3C,CAAD,CAAJ,CAAQ8C,OAAR,GAAkBH,IAAI,CAAC3C,CAAD,CAAJ,CAAQzC,oBAAR,GAA+BsF,MAAjD;AACH;;AAED,QAAIE,YAAY,GAAG5F,IAAI,CAACC,KAAL,CAAYD,IAAI,CAACE,MAAL,KAAgB,GAA5B,CAAnB;AACA,QAAI2F,UAAU,GAAG,CAAjB;;AACA,SAAK,IAAIhD,CAAC,GAAC,CAAX,EAAcA,CAAC,GAAC2C,IAAI,CAACR,MAArB,EAA6BnC,CAAC,EAA9B,EAAkC;AAC9B,UAAI+C,YAAY,IAAIC,UAAhB,IAA8BD,YAAY,GAAGC,UAAU,GAAGL,IAAI,CAAC3C,CAAD,CAAJ,CAAQ8C,OAAtE,EAA+E;AAC3E,eAAOH,IAAI,CAAC3C,CAAD,CAAX;AACH,OAFD,MAEO;AACHgD,QAAAA,UAAU,IAAIL,IAAI,CAAC3C,CAAD,CAAJ,CAAQ8C,OAAtB;AACH;AACJ;AACJ,GAtPK;AAwPNN,EAAAA,cAAc,EAAE,wBAAU9F,SAAV,EAAqB;AACjC,QAAI6F,cAAc,GAAG,EAArB;;AACA,QAAI7F,SAAS,CAACe,qBAAV,CAAgCwF,OAAhC,CAAwC,KAAKtE,WAAL,CAAiBjC,SAAS,CAACE,IAAV,GAAiB,CAAlC,EAAqCF,SAAS,CAACG,IAAV,GAAiB,CAAtD,EAAyDF,IAAjG,IAAyG,CAAC,CAA9G,EAAkH;AAC9G4F,MAAAA,cAAc,CAACL,IAAf,CACI;AACItF,QAAAA,IAAI,EAAEF,SAAS,CAACE,IAAV,GAAiB,CAD3B;AAEIC,QAAAA,IAAI,EAAEH,SAAS,CAACG,IAAV,GAAiB,CAF3B;AAGIU,QAAAA,oBAAoB,EAAEU,GAAG,CAACU,WAAJ,CAAgBjC,SAAS,CAACE,IAAV,GAAiB,CAAjC,EAAoCF,SAAS,CAACG,IAAV,GAAiB,CAArD,EAAwDU;AAHlF,OADJ;AAOH;;AACD,QAAIb,SAAS,CAACe,qBAAV,CAAgCwF,OAAhC,CAAwC,KAAKtE,WAAL,CAAiBjC,SAAS,CAACE,IAAV,GAAiB,CAAlC,EAAqCF,SAAS,CAACG,IAA/C,EAAqDF,IAA7F,IAAqG,CAAC,CAA1G,EAA8G;AAC1G4F,MAAAA,cAAc,CAACL,IAAf,CACI;AACItF,QAAAA,IAAI,EAAEF,SAAS,CAACE,IAAV,GAAiB,CAD3B;AAEIC,QAAAA,IAAI,EAAEH,SAAS,CAACG,IAFpB;AAGIU,QAAAA,oBAAoB,EAAEU,GAAG,CAACU,WAAJ,CAAgBjC,SAAS,CAACE,IAAV,GAAiB,CAAjC,EAAoCF,SAAS,CAACG,IAA9C,EAAoDU;AAH9E,OADJ;AAOH;;AACD,QAAIb,SAAS,CAACe,qBAAV,CAAgCwF,OAAhC,CAAwC,KAAKtE,WAAL,CAAiBjC,SAAS,CAACE,IAAV,GAAiB,CAAlC,EAAqCF,SAAS,CAACG,IAAV,GAAiB,CAAtD,EAAyDF,IAAjG,IAAyG,CAAC,CAA9G,EAAkH;AAC9G4F,MAAAA,cAAc,CAACL,IAAf,CACI;AACItF,QAAAA,IAAI,EAAEF,SAAS,CAACE,IAAV,GAAiB,CAD3B;AAEIC,QAAAA,IAAI,EAAEH,SAAS,CAACG,IAAV,GAAiB,CAF3B;AAGIU,QAAAA,oBAAoB,EAAEU,GAAG,CAACU,WAAJ,CAAgBjC,SAAS,CAACE,IAAV,GAAiB,CAAjC,EAAoCF,SAAS,CAACG,IAAV,GAAiB,CAArD,EAAwDU;AAHlF,OADJ;AAOH;;AACD,QAAIb,SAAS,CAACe,qBAAV,CAAgCwF,OAAhC,CAAwC,KAAKtE,WAAL,CAAiBjC,SAAS,CAACE,IAA3B,EAAiCF,SAAS,CAACG,IAAV,GAAiB,CAAlD,EAAqDF,IAA7F,IAAqG,CAAC,CAA1G,EAA8G;AAC1G4F,MAAAA,cAAc,CAACL,IAAf,CACI;AACItF,QAAAA,IAAI,EAAEF,SAAS,CAACE,IADpB;AAEIC,QAAAA,IAAI,EAAEH,SAAS,CAACG,IAAV,GAAiB,CAF3B;AAGIU,QAAAA,oBAAoB,EAAEU,GAAG,CAACU,WAAJ,CAAgBjC,SAAS,CAACE,IAA1B,EAAgCF,SAAS,CAACG,IAAV,GAAiB,CAAjD,EAAoDU;AAH9E,OADJ;AAOH;;AACD,QAAIb,SAAS,CAACe,qBAAV,CAAgCwF,OAAhC,CAAwC,KAAKtE,WAAL,CAAiBjC,SAAS,CAACE,IAA3B,EAAiCF,SAAS,CAACG,IAAV,GAAiB,CAAlD,EAAqDF,IAA7F,IAAqG,CAAC,CAA1G,EAA8G;AAC1G4F,MAAAA,cAAc,CAACL,IAAf,CACI;AACItF,QAAAA,IAAI,EAAEF,SAAS,CAACE,IADpB;AAEIC,QAAAA,IAAI,EAAEH,SAAS,CAACG,IAAV,GAAiB,CAF3B;AAGIU,QAAAA,oBAAoB,EAAEU,GAAG,CAACU,WAAJ,CAAgBjC,SAAS,CAACE,IAA1B,EAAgCF,SAAS,CAACG,IAAV,GAAiB,CAAjD,EAAoDU;AAH9E,OADJ;AAOH;;AACD,QAAIb,SAAS,CAACe,qBAAV,CAAgCwF,OAAhC,CAAwC,KAAKtE,WAAL,CAAiBjC,SAAS,CAACE,IAAV,GAAiB,CAAlC,EAAqCF,SAAS,CAACG,IAAV,GAAiB,CAAtD,EAAyDF,IAAjG,IAAyG,CAAC,CAA9G,EAAkH;AAC9G4F,MAAAA,cAAc,CAACL,IAAf,CACI;AACItF,QAAAA,IAAI,EAAEF,SAAS,CAACE,IAAV,GAAiB,CAD3B;AAEIC,QAAAA,IAAI,EAAEH,SAAS,CAACG,IAAV,GAAiB,CAF3B;AAGIU,QAAAA,oBAAoB,EAAEU,GAAG,CAACU,WAAJ,CAAgBjC,SAAS,CAACE,IAAV,GAAiB,CAAjC,EAAoCF,SAAS,CAACG,IAAV,GAAiB,CAArD,EAAwDU;AAHlF,OADJ;AAOH;;AACD,QAAIb,SAAS,CAACe,qBAAV,CAAgCwF,OAAhC,CAAwC,KAAKtE,WAAL,CAAiBjC,SAAS,CAACE,IAAV,GAAiB,CAAlC,EAAqCF,SAAS,CAACG,IAA/C,EAAqDF,IAA7F,IAAqG,CAAC,CAA1G,EAA8G;AAC1G4F,MAAAA,cAAc,CAACL,IAAf,CACI;AACItF,QAAAA,IAAI,EAAEF,SAAS,CAACE,IAAV,GAAiB,CAD3B;AAEIC,QAAAA,IAAI,EAAEH,SAAS,CAACG,IAFpB;AAGIU,QAAAA,oBAAoB,EAAEU,GAAG,CAACU,WAAJ,CAAgBjC,SAAS,CAACE,IAAV,GAAiB,CAAjC,EAAoCF,SAAS,CAACG,IAA9C,EAAoDU;AAH9E,OADJ;AAOH;;AACD,QAAIb,SAAS,CAACe,qBAAV,CAAgCwF,OAAhC,CAAwC,KAAKtE,WAAL,CAAiBjC,SAAS,CAACE,IAAV,GAAiB,CAAlC,EAAqCF,SAAS,CAACG,IAAV,GAAiB,CAAtD,EAAyDF,IAAjG,IAAyG,CAAC,CAA9G,EAAkH;AAC9G4F,MAAAA,cAAc,CAACL,IAAf,CACI;AACItF,QAAAA,IAAI,EAAEF,SAAS,CAACE,IAAV,GAAiB,CAD3B;AAEIC,QAAAA,IAAI,EAAEH,SAAS,CAACG,IAAV,GAAiB,CAF3B;AAGIU,QAAAA,oBAAoB,EAAEU,GAAG,CAACU,WAAJ,CAAgBjC,SAAS,CAACE,IAAV,GAAiB,CAAjC,EAAoCF,SAAS,CAACG,IAAV,GAAiB,CAArD,EAAwDU;AAHlF,OADJ;AAOH,KAzEgC,CA2EjC;;;AACA,QAAI2F,eAAe,GAAGX,cAAc,CAACY,MAAf,CAAsB,KAAKC,WAA3B,CAAtB;;AACA,QAAI1G,SAAS,CAACC,IAAV,KAAmB,KAAnB,IAA4BuG,eAAe,CAACf,MAAhB,KAA2B,CAA3D,EAA8D;AAC1D,aAAOe,eAAP;AACH,KA/EgC,CAgFjC;;;AAEA,QAAIX,cAAc,CAACJ,MAAnB,EAA2B;AACvB,aAAOI,cAAP;AACH,KAFD,MAEO;AACH,aAAO,KAAP;AACH;AACJ,GA/UK;AAgVNa,EAAAA,WAAW,EAAE,qBAAUC,MAAV,EAAkB;AAC3B,WAAOpF,GAAG,CAACU,WAAJ,CAAgB0E,MAAM,CAACzG,IAAvB,EAA6ByG,MAAM,CAACxG,IAApC,EAA0CF,IAA1C,KAAmD,OAA1D;AACH;AAlVK,CAAV;;AAqVA,IAAI2G,YAAY,GAAG,SAAfA,YAAe,GAAY;AAC3BvE,EAAAA,CAAC,CAAC,UAAD,CAAD,CAAcuC,EAAd,CAAiB,OAAjB,EAA0BiC,MAA1B;AACAxE,EAAAA,CAAC,CAAC,YAAD,CAAD,CAAgBuC,EAAhB,CAAmB,OAAnB,EAA4BkC,QAA5B;AACAzE,EAAAA,CAAC,CAAC,YAAD,CAAD,CAAgBuC,EAAhB,CAAmB,OAAnB,EAA4BmC,QAA5B;AACA1E,EAAAA,CAAC,CAAC,YAAD,CAAD,CAAgBuC,EAAhB,CAAmB,OAAnB,EAA4BoC,QAA5B;AACA3E,EAAAA,CAAC,CAAC,WAAD,CAAD,CAAeuC,EAAf,CAAkB,OAAlB,EAA2BqC,OAA3B;AACA5E,EAAAA,CAAC,CAAC,eAAD,CAAD,CAAmBuC,EAAnB,CAAsB,OAAtB,EAA+B3B,kBAA/B;AACAZ,EAAAA,CAAC,CAAC,MAAD,CAAD,CAAUuC,EAAV,CAAa,OAAb,EAAsB,YAAtB,EAAoCR,YAApC;AACH,CARD;;AAUA,IAAIyC,MAAM,GAAG,SAATA,MAAS,GAAY;AACrBxE,EAAAA,CAAC,CAACM,KAAF,CAAQpB,GAAG,CAAC8B,cAAJ,CAAmB;AAACpD,IAAAA,IAAI,EAAE;AAAP,GAAnB,CAAR,EAA2CsB,GAA3C;AACH,CAFD;;AAIA,IAAIuF,QAAQ,GAAG,SAAXA,QAAW,GAAY;AACvBzE,EAAAA,CAAC,CAACM,KAAF,CAAQpB,GAAG,CAAC8B,cAAJ,CAAmB;AAACpD,IAAAA,IAAI,EAAE;AAAP,GAAnB,CAAR,EAA6CsB,GAA7C;AACH,CAFD;;AAIA,IAAIwF,QAAQ,GAAG,SAAXA,QAAW,GAAY;AACvB1E,EAAAA,CAAC,CAACM,KAAF,CAAQpB,GAAG,CAAC8B,cAAJ,CAAmB;AAACpD,IAAAA,IAAI,EAAE;AAAP,GAAnB,CAAR,EAA6CsB,GAA7C;AACH,CAFD;;AAIA,IAAI6C,YAAY,GAAG,SAAfA,YAAe,GAAY;AAC3B/B,EAAAA,CAAC,CAACM,KAAF,CAAQpB,GAAG,CAAC6C,YAAJ,CAAiB,IAAjB,CAAR,EAAgC7C,GAAhC;AACH,CAFD;;AAIA,IAAIyF,QAAQ,GAAG,SAAXA,QAAW,GAAY;AACvB3E,EAAAA,CAAC,CAACM,KAAF,CAAQpB,GAAG,CAACW,KAAJ,CAAUgF,QAAQ,CAAC7E,CAAC,CAAC,iBAAD,CAAD,CAAqBc,GAArB,EAAD,CAAlB,EAAgD5B,GAAhD,CAAR;AACH,CAFD;;AAIA,IAAI0F,OAAO,GAAG,SAAVA,OAAU,GAAY;AACtB5E,EAAAA,CAAC,CAACM,KAAF,CAAQpB,GAAG,CAACuB,IAAJ,EAAR,EAAoBvB,GAApB;AACH,CAFD;;AAIA,IAAI0B,kBAAkB,GAAG,SAArBA,kBAAqB,GAAY;AACjCZ,EAAAA,CAAC,CAACM,KAAF,CAAQpB,GAAG,CAAC0B,kBAAJ,EAAR,EAAkC1B,GAAlC;AACH,CAFD;;AAIA4F,MAAM,CAAC,YAAY;AACf5F,EAAAA,GAAG,CAACkC,SAAJ;AACAmD,EAAAA,YAAY;AACf,CAHK,CAAN","file":"index.js","sourceRoot":"../src","sourcesContent":["var Cow = function (mapObject) {\n    this.type = 'cow';\n    this.xPos = mapObject.xPos;\n    this.yPos = mapObject.yPos;\n    this.minRandomEnergy = 100;\n    this.maxRandomEnergy = 200;\n    this.enoughEnergyToBorn = 650;\n    this.lessEnoughAfterToBorn = 300;\n    this.energy = mapObject.energy ||  Math.floor(Math.random() * (this.maxRandomEnergy - this.minRandomEnergy + 1) + this.minRandomEnergy);\n    this.energyKoef = 700;\n    this.koefPossibilityEnter = 1;\n    this.maxPossibleEnergy = 700;\n    this.possibleObjectsToMove = ['empty', 'grass'];\n    this.BLOCKED_OBJECT = false;\n    this.objectClass = 'cow';\n    this.moveStepEnergy = 5;\n};\n\nvar Grass = function (mapObject) {\n    this.type = 'grass';\n    this.xPos = mapObject.xPos;\n    this.yPos = mapObject.yPos;\n    this.minRandomEnergy = 10;\n    this.maxRandomEnergy = 20;\n    this.enoughEnergyToBorn = 45;\n    this.lessEnoughAfterToBorn = 25;\n    this.energy = mapObject.energy ||  Math.floor(Math.random() * (this.maxRandomEnergy - this.minRandomEnergy + 1) + this.minRandomEnergy);\n    this.energyKoef = 50;\n    this.koefPossibilityEnter = 1;\n    this.maxPossibleEnergy = 50;\n    this.possibleObjectsToMove = ['empty'];\n    this.BLOCKED_OBJECT = false;\n    this.objectClass = 'grass';\n    this.addEnergyEveryStep = 1;\n};\n\nvar Stone = function () {\n    this.type = 'stone';\n    this.objectClass = 'stone';\n    this.koefPossibilityEnter = 1;\n};\n\nvar Empty = function () {\n    this.type = 'empty';\n    this.objectClass = 'empty';\n    this.koefPossibilityEnter = 1;\n};\n\n\n//представление карты\nvar map = {\n    CURRENT_LOOP_INDEX: 0,\n    RANDOM_GRASS_APPEARANCE: 5,\n    INTERVAL_TIME: 300,\n    MAP_POSSIBLE_WIDTH: Math.floor(screen.width / 50) - 1,\n    MAP_WIDTH: 999,\n    MAP_HEIGHT: 10,\n    MIN_POSSIBLE_TIME_INTERVAL: 500,\n    COORDS_LIST: [],\n    start: function (newInterval) {\n        var mapEl = $('.map');\n        if (!mapEl.hasClass('move')) {\n            var self = this;\n            if (newInterval === undefined) {\n                newInterval = this.timeInerval;\n            }\n            this.timeInerval = setInterval($.proxy(self.lookEveryCell, self), newInterval);\n            mapEl.addClass('move');\n        }\n    },\n    stop: function () {\n        clearInterval(this.timeInerval);\n        $('.map').removeClass('move');\n    },\n    setNewTimeInterval: function () {\n        this.stop();\n        this.INTERVAL_TIME = prompt('Введите новую скорость (милисекунды)');\n        if (this.INTERVAL_TIME < this.MIN_POSSIBLE_TIME_INTERVAL) {\n            this.INTERVAL_TIME = this.MIN_POSSIBLE_TIME_INTERVAL;\n        }\n        $('._mapSpeedInput').val(this.INTERVAL_TIME);\n        $.proxy(setTimeout(this.start(this.INTERVAL_TIME), 1000), this);\n    },\n    lookEveryCell: function () {\n        this.CURRENT_LOOP_INDEX++;\n        if (this.CURRENT_LOOP_INDEX % this.RANDOM_GRASS_APPEARANCE === 0) {\n            this.setObjectToMap({type: 'grass'});\n        }\n        for (var i = 0; i < this.MAP_HEIGHT; i++) {\n            for (var j = 0; j < this.MAP_WIDTH; j++) {\n                if (this.COORDS_LIST[i][j].type === 'cow' || this.COORDS_LIST[i][j].type === 'grass') {\n                    if (this.COORDS_LIST[i][j].BLOCKED_OBJECT !== this.CURRENT_LOOP_INDEX){\n                        if (this.COORDS_LIST[i][j].energy <= 0) {\n                            this.COORDS_LIST[i][j] = new Empty();\n                        } else {\n                            this.moveObject(this.COORDS_LIST[i][j]);\n                        }\n                    }\n                } else if (this.COORDS_LIST[i][j].type === 'empty'){\n                  this.COORDS_LIST[i][j].koefPossibilityEnter++ ;\n                }\n            }\n        }\n    },\n    createMap: function () {\n        //проверка максимально возможной ширины карты\n        this.MAP_WIDTH = this.MAP_WIDTH > this.MAP_POSSIBLE_WIDTH ? this.MAP_POSSIBLE_WIDTH :this.MAP_WIDTH ;\n\n        for (var i = 0; i < this.MAP_HEIGHT; i++) {\n            this.COORDS_LIST[i] = [];\n            for (var j = 0; j < this.MAP_WIDTH; j++) {\n                if (i === 0 || j === 0 || i === this.MAP_HEIGHT - 1 || j === this.MAP_WIDTH - 1) {\n                    this.COORDS_LIST[i][j] = new Stone();\n                } else {\n                    this.COORDS_LIST[i][j] = new Empty();\n                }\n            }\n        }\n        this.show();\n    },\n    show: function () {\n        var mapHTML = $('.map');\n        mapHTML.empty();\n        var mapList = '';\n        for (var i = 0; i < this.MAP_HEIGHT; i++) {\n            for (var j = 0; j < this.MAP_WIDTH; j++) {\n                var energy = this.COORDS_LIST[i][j].energy;\n                var energyСoef = this.COORDS_LIST[i][j].energyKoef;\n                var energySize = '';\n                if (energyСoef === undefined) {\n                    energySize = 'no-energy';\n                } else if (energy < energyСoef/5) {\n                    energySize = 'e1';\n                } else if (energy < 2*energyСoef/5) {\n                    energySize = 'e2';\n                } else if (energy < 3*energyСoef/5) {\n                    energySize = 'e3';\n                } else if (energy < 4*energyСoef/5) {\n                    energySize = 'e4';\n                } else {\n                    energySize = 'e5';\n                }\n                mapList = mapList + '<li class=\"map-frame ' + this.COORDS_LIST[i][j].objectClass + '\" data-pos=\"' + [i, j] + '\"><span class=\"energy ' + energySize + '\"></span></li>'\n            }\n            mapList = mapList + '<br />'\n        }\n        mapHTML.append(mapList);\n    },\n    setObjectToMap: function (mapObject) {\n        if (!mapObject.xPos || !mapObject.yPos) {\n            var allEmptyCellsArr = this.findFromAllEmptyCells();\n            if (!allEmptyCellsArr) {\n                map.stop();\n                return alert('Места нет!');\n            }\n            mapObject.xPos = allEmptyCellsArr[0];\n            mapObject.yPos = allEmptyCellsArr[1];\n        }\n\n        if (mapObject.type === 'cow') {\n            this.COORDS_LIST[mapObject.xPos][mapObject.yPos] = new Cow(mapObject);\n        } else if (mapObject.type === 'grass') {\n            this.COORDS_LIST[mapObject.xPos][mapObject.yPos] = new Grass(mapObject);\n        } else if (mapObject.type === 'stone') {\n            this.COORDS_LIST[mapObject.xPos][mapObject.yPos] = new Stone();\n        }\n\n        this.show();\n    },\n    mapCellClick: function (cell) {\n        map.stop();\n        map.deleteNav();\n        $(cell).prepend($('.cell-nav-holder').html());\n        $.proxy(map.addCellListeners(), map);\n    },\n    deleteNav: function () {\n        $('.map .cell-nav').each(function () {\n          $(this).remove();\n        });\n    },\n    addCellListeners: function () {\n        $('._cell-nav-cancel').on('click', this.closeCellNav);\n        $('._cell-nav-delete').on('click', this.deleteObject);\n        $('._cell-nav-add-cow').on('click', this.addCowByCell);\n        $('._cell-nav-add-grass').on('click', this.addGrassByCell);\n        $('._cell-nav-add-stone').on('click', this.addStoneByCell);\n    },\n    closeCellNav: function () {\n        $(this).closest('.cell-nav').remove();\n    },\n    deleteObject: function () {\n        var clickedPositionList = $(this).closest('.map-frame').data('pos').split(',');\n        if (clickedPositionList[0] == 0 || clickedPositionList[1] == 0 || clickedPositionList[0] == this.MAP_HEIGHT - 1 || clickedPositionList[1] == this.MAP_WIDTH - 1){\n            alert('Невозможно удалить стену!');\n        } else {\n            map.COORDS_LIST[clickedPositionList[0]][clickedPositionList[1]] = new Empty();\n            map.show();\n        }\n    },\n    addCowByCell: function () {\n        var clickedPositionList = $(this).closest('.map-frame').data('pos').split(',');\n        map.COORDS_LIST[clickedPositionList[0]][clickedPositionList[1]] = new Cow({type: 'cow', xPos: parseFloat(clickedPositionList[0]), yPos: parseFloat(clickedPositionList[1])});\n        map.show();\n    },\n    addGrassByCell: function () {\n        var clickedPositionList = $(this).closest('.map-frame').data('pos').split(',');\n        map.COORDS_LIST[clickedPositionList[0]][clickedPositionList[1]] = new Grass({type: 'grass', xPos: parseFloat(clickedPositionList[0]), yPos: parseFloat(clickedPositionList[1])});\n        map.show();\n    },\n    addStoneByCell: function () {\n        var clickedPositionList = $(this).closest('.map-frame').data('pos').split(',');\n        map.COORDS_LIST[clickedPositionList[0]][clickedPositionList[1]] = new Stone();\n        map.show();\n    },\n    findFromAllEmptyCells: function () {\n        var allEmptyCells = [];\n        for (var i = 0; i < this.MAP_HEIGHT; i++) {\n            for (var j = 0; j < this.MAP_WIDTH; j++) {\n                if (this.COORDS_LIST[i][j].type === 'empty') {\n                    allEmptyCells.push([i,j]);\n                }\n            }\n        }\n        if (!allEmptyCells.length) {\n            return false;\n        } else {\n            return allEmptyCells[Math.floor(Math.random() * allEmptyCells.length)];\n        }\n    },\n    moveObject: function (mapObject) {\n        var randomObjValues = this.getRandomEmptyPlace(mapObject);\n        var newObj = {};\n        newObj.xPos = randomObjValues.xPos;\n        newObj.yPos = randomObjValues.yPos;\n        newObj.energy = randomObjValues.energy;\n\n        if (this.COORDS_LIST[newObj.xPos][newObj.yPos].type === 'grass' && this.COORDS_LIST[mapObject.xPos][mapObject.yPos].type === 'cow') {\n            mapObject.energy = mapObject.energy + this.COORDS_LIST[newObj.xPos][newObj.yPos].energy;\n        }\n\n        if (mapObject.enoughEnergyToBorn && mapObject.energy >= mapObject.enoughEnergyToBorn) {\n            mapObject.energy = mapObject.energy - mapObject.lessEnoughAfterToBorn;\n            mapObject.BLOCKED_OBJECT = this.CURRENT_LOOP_INDEX;\n            this.setObjectToMap({type : mapObject.type, xPos: newObj.xPos, yPos: newObj.yPos})\n        } else if (mapObject.type === 'cow') {\n            this.COORDS_LIST[mapObject.xPos][mapObject.yPos].koefPossibilityEnter = 1;\n            this.COORDS_LIST[mapObject.xPos][mapObject.yPos] = new Empty();\n\n            mapObject.xPos = newObj.xPos;\n            mapObject.yPos = newObj.yPos;\n            this.COORDS_LIST[mapObject.xPos][mapObject.yPos] = mapObject;\n            mapObject.BLOCKED_OBJECT = this.CURRENT_LOOP_INDEX;\n        }\n\n        if (mapObject.moveStepEnergy !== undefined) {\n            mapObject.energy = mapObject.energy - mapObject.moveStepEnergy;\n        }\n\n        if (mapObject.addEnergyEveryStep !== undefined) {\n            if (mapObject.energy < mapObject.maxPossibleEnergy) {\n                mapObject.energy = mapObject.energy + mapObject.addEnergyEveryStep;\n            }\n        }\n\n        this.show();\n    },\n    getRandomEmptyPlace: function (mapObject) {\n        var emptyCellsList = this.findEmptyCells(mapObject);\n        if (!emptyCellsList) {\n            return {xPos: mapObject.xPos, yPos: mapObject.yPos, energy: mapObject.energy - mapObject.moveStepEnergy}\n        }\n        var randomEmptyCell = this.randomUseKoef(emptyCellsList);\n        var energy = Math.floor(Math.random() * (mapObject.maxRandomEnergy - mapObject.minRandomEnergy + 1) + mapObject.minRandomEnergy);\n        return {xPos: randomEmptyCell.xPos, yPos: randomEmptyCell.yPos, energy: energy};\n    },\n\n    randomUseKoef: function (list) {\n        var koefSum = 0;\n        for (var i=0; i<list.length; i++) {\n            koefSum += list[i].koefPossibilityEnter;\n        }\n\n        var etalon = 100 / koefSum;\n        for (var i=0; i<list.length; i++) {\n            list[i].procent = list[i].koefPossibilityEnter * etalon;\n        }\n\n        var randomNumber = Math.floor( Math.random() * 100 );\n        var procentSum = 0;\n        for (var i=0; i<list.length; i++) {\n            if (randomNumber >= procentSum && randomNumber < procentSum + list[i].procent) {\n                return list[i];\n            } else {\n                procentSum += list[i].procent;\n            }\n        }\n    },\n\n    findEmptyCells: function (mapObject) {\n        var emptyCellsList = [];\n        if (mapObject.possibleObjectsToMove.indexOf(this.COORDS_LIST[mapObject.xPos - 1][mapObject.yPos - 1].type) > -1 ) {\n            emptyCellsList.push(\n                {\n                    xPos: mapObject.xPos - 1,\n                    yPos: mapObject.yPos - 1,\n                    koefPossibilityEnter: map.COORDS_LIST[mapObject.xPos - 1][mapObject.yPos - 1].koefPossibilityEnter\n                }\n            );\n        }\n        if (mapObject.possibleObjectsToMove.indexOf(this.COORDS_LIST[mapObject.xPos - 1][mapObject.yPos].type) > -1 ) {\n            emptyCellsList.push(\n                {\n                    xPos: mapObject.xPos - 1,\n                    yPos: mapObject.yPos,\n                    koefPossibilityEnter: map.COORDS_LIST[mapObject.xPos - 1][mapObject.yPos].koefPossibilityEnter\n                }\n            );\n        }\n        if (mapObject.possibleObjectsToMove.indexOf(this.COORDS_LIST[mapObject.xPos - 1][mapObject.yPos + 1].type) > -1 ) {\n            emptyCellsList.push(\n                {\n                    xPos: mapObject.xPos - 1,\n                    yPos: mapObject.yPos + 1,\n                    koefPossibilityEnter: map.COORDS_LIST[mapObject.xPos - 1][mapObject.yPos + 1].koefPossibilityEnter\n                }\n            );\n        }\n        if (mapObject.possibleObjectsToMove.indexOf(this.COORDS_LIST[mapObject.xPos][mapObject.yPos - 1].type) > -1 ) {\n            emptyCellsList.push(\n                {\n                    xPos: mapObject.xPos,\n                    yPos: mapObject.yPos - 1,\n                    koefPossibilityEnter: map.COORDS_LIST[mapObject.xPos][mapObject.yPos - 1].koefPossibilityEnter\n                }\n            );\n        }\n        if (mapObject.possibleObjectsToMove.indexOf(this.COORDS_LIST[mapObject.xPos][mapObject.yPos + 1].type) > -1 ) {\n            emptyCellsList.push(\n                {\n                    xPos: mapObject.xPos,\n                    yPos: mapObject.yPos + 1,\n                    koefPossibilityEnter: map.COORDS_LIST[mapObject.xPos][mapObject.yPos + 1].koefPossibilityEnter\n                }\n            );\n        }\n        if (mapObject.possibleObjectsToMove.indexOf(this.COORDS_LIST[mapObject.xPos + 1][mapObject.yPos - 1].type) > -1 ) {\n            emptyCellsList.push(\n                {\n                    xPos: mapObject.xPos + 1,\n                    yPos: mapObject.yPos - 1,\n                    koefPossibilityEnter: map.COORDS_LIST[mapObject.xPos + 1][mapObject.yPos - 1].koefPossibilityEnter\n                }\n            );\n        }\n        if (mapObject.possibleObjectsToMove.indexOf(this.COORDS_LIST[mapObject.xPos + 1][mapObject.yPos].type) > -1 ) {\n            emptyCellsList.push(\n                {\n                    xPos: mapObject.xPos + 1,\n                    yPos: mapObject.yPos,\n                    koefPossibilityEnter: map.COORDS_LIST[mapObject.xPos + 1][mapObject.yPos].koefPossibilityEnter\n                }\n            );\n        }\n        if (mapObject.possibleObjectsToMove.indexOf(this.COORDS_LIST[mapObject.xPos + 1][mapObject.yPos + 1].type) > -1 ) {\n            emptyCellsList.push(\n                {\n                    xPos: mapObject.xPos + 1,\n                    yPos: mapObject.yPos + 1,\n                    koefPossibilityEnter: map.COORDS_LIST[mapObject.xPos + 1][mapObject.yPos + 1].koefPossibilityEnter\n                }\n            );\n        }\n\n        //умная корова\n        var filterGrassList = emptyCellsList.filter(this.filterGrass);\n        if (mapObject.type === 'cow' && filterGrassList.length !== 0) {\n            return filterGrassList;\n        }\n        //\n\n        if (emptyCellsList.length) {\n            return emptyCellsList;\n        } else {\n            return false;\n        }\n    },\n    filterGrass: function (coords) {\n        return map.COORDS_LIST[coords.xPos][coords.yPos].type === 'grass';\n    }\n};\n\nvar addListeners = function () {\n    $('._addCow').on('click', addCow);\n    $('._addGrass').on('click', addGrass);\n    $('._addStone').on('click', addStone);\n    $('._mapStart').on('click', mapStart);\n    $('._mapStop').on('click', mapStop);\n    $('._mapSpeedBtn').on('click', setNewTimeInterval);\n    $('.map').on('click', '.map-frame', mapCellClick);\n};\n\nvar addCow = function () {\n    $.proxy(map.setObjectToMap({type: 'cow'}), map);\n};\n\nvar addGrass = function () {\n    $.proxy(map.setObjectToMap({type: 'grass'}), map);\n};\n\nvar addStone = function () {\n    $.proxy(map.setObjectToMap({type: 'stone'}), map);\n};\n\nvar mapCellClick = function () {\n    $.proxy(map.mapCellClick(this), map);\n};\n\nvar mapStart = function () {\n    $.proxy(map.start(parseInt($('._mapSpeedInput').val()), map));\n};\n\nvar mapStop = function () {\n    $.proxy(map.stop(), map);\n};\n\nvar setNewTimeInterval = function () {\n    $.proxy(map.setNewTimeInterval(), map);\n};\n\njQuery(function () {\n    map.createMap();\n    addListeners();\n});"]}